<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4-1-3</title>
  </head>
  <body>
    <script>
      async function statusCode(code) {
        //주요 상태코드 발생
        const response = await fetch(`https://tools-httpstatus.pickup-services.com/${code}`);

        //상태 코드 확인
        if (response.ok) {
          //단순 텍스트 형식이라 .text로 받아옴
          const data = await response.text();
          console.log(data);
          return data;
        }

        //주요 에러 처리
        if (response.status === 400) {
          console.error("400 Bad Request! 잘못된 요청입니다!");
        } else if (response.status === 401) {
          console.error("401 Unauthorized! 로그인이 필요합니다!");
        } else if (response.status === 403) {
          console.error("403 Forbidden! 권한이 없습니다!");
        } else if (response.status === 404) {
          console.error("404 Not Found! 요청한 데이터를 찾을 수 없습니다!");
        } else if (response.status === 500) {
          console.error("500 Internal Server Error! 서버 내부 에러입니다!");
        }

        throw new Error(`HTTP Error: ${response.status}`);
      }

      statusCode(200); //200 OK
      statusCode(201); //201 Created
      statusCode(400); //400 Bad Request
      statusCode(401); //401 Unauthorized
      statusCode(403); //403 Forbidden
      statusCode(404); //404 Not Found
      statusCode(500); //500 Internal Server Error

      /*
      4xx(클라이언트 에러)와 5xx(서버 에러)의 차이점

      4xx 에러 - 클라이언트 잘못
      같은 요청을 반복해도 결과는 같으니
      요청을 다시 수정해보거나
      인증 여부를 다시 확인해보자.

      5xx 에러 - 서버 잘못
      클라이언트가 할수 있는게 적은 상태이다
      잠시 기다렸다가 다시 시도하거나
      서버 관리자에게 발생한 에러 유형을 말하며 문의하자.
      */
    </script>
  </body>
</html>
