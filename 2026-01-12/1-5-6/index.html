<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1-5-6</title>
    <link rel="stylesheet" href="styles/style.css" />
  </head>
  <body>
    <div class="container">
      <input id="todo-input" type="text" placeholder="할 일 입력" />
      <button id="add-btn">추가</button>
      <button id="remove-btn">삭제</button>
      <button id="reset-btn">초기화</button>

      <ul id="todo-list"></ul>

      <script>
        //필요한 요소들 찾아 변수 생성
        const input = document.getElementById("todo-input");
        const addBtn = document.getElementById("add-btn");
        const removeBtn = document.getElementById("remove-btn");
        const resetBtn = document.getElementById("reset-btn");
        const ul = document.getElementById("todo-list");

        //데이터 불러오는 변수
        const saved = localStorage.getItem("todos");
        const todos = saved ? JSON.parse(saved) : [];

        //화면 렌더링
        function render() {
          ul.innerHTML = "할 일 목록";
          todos.forEach((todo) => {
            const li = document.createElement("li");
            li.textContent = todo;
            ul.appendChild(li);
          });
        }

        //화면 렌더링 진행
        render();

        //버튼 클릭시 추가 이벤트
        addBtn.addEventListener("click", function () {
          const text = input.value;
          //아무것도 입력 안되거나 공백만 입력시 함수 종료
          if (!text.trim()) return;

          //입력시 정상적으로 li 생성 및 내용 추가
          todos.push(text); //push() = 배열의 끝에 추가
          localStorage.setItem("todos", JSON.stringify(todos)); //로컬 스토리지 저장

          render(); // 화면 업데이트
          input.value = ""; //입력 후 칸 비우기
        });

        removeBtn.addEventListener("click", function () {
          todos.pop(); //push() = 배열의 끝에서 삭제
          localStorage.setItem("todos", JSON.stringify(todos)); //로컬 스토리지 저장

          render(); // 화면 업데이트
        });

        //버튼 클릭시 초기화 이벤트
        resetBtn.addEventListener("click", function () {
          todos.length = 0; //배열 초기화
          localStorage.removeItem("todos", JSON.stringify(todos)); //로컬 스토리지에서 삭제
          render(); // 화면 업데이트
        });
      </script>
    </div>
  </body>
</html>
